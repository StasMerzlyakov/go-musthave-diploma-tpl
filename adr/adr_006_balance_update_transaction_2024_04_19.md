# ADR_006

## Название
Обеспечение транзакционности операций с обновлением баланса

## Статус
proposed

## Дата
2024-04-19

## Контекст
С учетом релизной системы учета обновлений баланса, необходимо обеспечить атомарность операций корерктировки баланса с добавления записи о списании 
и корректировки баласа с обновлением данных от системы расчета начислений.

## Описание принятого/предложенного решения
В методе обновления баланса (storage.UpdateBalanceByWithdraw ) в транзакции происходит добавление записи о списании и обновление записи о балансе. Если update баланса ничего не вернул - транзакция откатывается.

Аналогичный прием в методе storage.UpdateBalanceByOrder

## Недостатки решения

## Связана
ADR_004, ADR_005

## Комментарии

